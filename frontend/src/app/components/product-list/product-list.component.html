<div class="product-list">
  <div class="page-header">
    <h1>–ö–∞—Ç–∞–ª–æ–≥ –¥—É—Ö–æ–≤</h1>
    <p>–ù–∞–π–¥–∏—Ç–µ —Å–≤–æ–π –∏–¥–µ–∞–ª—å–Ω—ã–π –∞—Ä–æ–º–∞—Ç</p>
  </div>

  <div class="content-wrapper">
    <!-- Filters Sidebar -->
    <aside class="filters-sidebar">
      <div class="filters-header">
        <h3>–§–∏–ª—å—Ç—Ä—ã</h3>
        <button class="clear-btn" (click)="clearFilters()">–°–±—Ä–æ—Å–∏—Ç—å</button>
      </div>

      <!-- Search -->
      <div class="filter-group">
        <label>–ü–æ–∏—Å–∫</label>
        <input type="text"
               [(ngModel)]="filters.search"
               (keyup.enter)="applyFilters()"
               placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ –±—Ä–µ–Ω–¥..."
               class="filter-input">
      </div>

      <!-- Brand Filter -->
      <div class="filter-group">
        <label>–ë—Ä–µ–Ω–¥</label>
        <select [(ngModel)]="filters.brand" (change)="applyFilters()" class="filter-select">
          <option value="">–í—Å–µ –±—Ä–µ–Ω–¥—ã</option>
          <option *ngFor="let brand of brands" [value]="brand">
            {{ brand }}
          </option>
        </select>
      </div>

      <!-- Category Filter -->
      <div class="filter-group">
        <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
        <select [(ngModel)]="filters.category" (change)="applyFilters()" class="filter-select">
          <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
          <option *ngFor="let category of categories" [value]="category">
            {{ category }}
          </option>
        </select>
      </div>

      <!-- Price Range -->
      <div class="filter-group">
        <label>–¶–µ–Ω–∞, ‚ÇΩ</label>
        <div class="price-inputs">
          <input type="number"
                 [(ngModel)]="filters.minPrice"
                 (change)="applyFilters()"
                 placeholder="–û—Ç"
                 class="price-input">
          <input type="number"
                 [(ngModel)]="filters.maxPrice"
                 (change)="applyFilters()"
                 placeholder="–î–æ"
                 class="price-input">
        </div>
      </div>

      <!-- Stock Filter -->
      <div class="filter-group">
        <label class="checkbox-label">
          <input type="checkbox"
                 [(ngModel)]="filters.inStock"
                 (change)="applyFilters()"
                 class="checkbox">
          –¢–æ–ª—å–∫–æ –≤ –Ω–∞–ª–∏—á–∏–∏
        </label>
      </div>

      <!-- Sort -->
      <div class="filter-group">
        <label>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</label>
        <select [(ngModel)]="filters.sortBy" (change)="applyFilters()" class="filter-select">
          <option value="">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</option>
          <option value="price_asc">–¶–µ–Ω–∞ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é</option>
          <option value="price_desc">–¶–µ–Ω–∞ –ø–æ —É–±—ã–≤–∞–Ω–∏—é</option>
          <option value="name_asc">–ù–∞–∑–≤–∞–Ω–∏–µ –ê-–Ø</option>
          <option value="name_desc">–ù–∞–∑–≤–∞–Ω–∏–µ –Ø-–ê</option>
        </select>
      </div>

      <button class="apply-filters-btn" (click)="applyFilters()">
        –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
      </button>
    </aside>

    <!-- Main Content -->
    <main class="products-main">
      <!-- Loading -->
      <div *ngIf="loading" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>

      <!-- Products Grid -->
      <div *ngIf="!loading" class="products-grid">
        <div *ngFor="let product of products" class="product-card">
          <div class="product-image-container">
            <img [src]="product.image_url"
                 [alt]="product.name"
                 class="product-image"
                 (error)="product.image_url = 'assets/images/placeholder.jpg'">
            <div class="product-badge" *ngIf="!product.in_stock">
              –ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏
            </div>
          </div>

          <div class="product-content">
            <h3 class="product-name">{{ product.name }}</h3>
            <p class="product-brand">{{ product.brand }}</p>
            <p class="product-category">{{ product.category }}</p>
            <p class="product-volume">{{ product.volume_ml }} –º–ª</p>

            <div class="product-price-section">
              <span class="product-price">{{ product.price | number }} ‚ÇΩ</span>
              <span class="product-stock" [class.in-stock]="product.in_stock">
                {{ product.in_stock ? '–í –Ω–∞–ª–∏—á–∏–∏' : '–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏' }}
              </span>
            </div>

            <p class="product-description">{{ product.description | slice:0:100 }}...</p>
          </div>

          <div class="product-actions">
            <button class="add-to-cart-btn"
                    (click)="addToCart(product)"
                    [disabled]="!product.in_stock">
              –í –∫–æ—Ä–∑–∏–Ω—É
            </button>
            <a [routerLink]="['/product', product.id]" class="details-btn">
              –ü–æ–¥—Ä–æ–±–Ω–µ–µ
            </a>
          </div>
        </div>
      </div>

      <!-- No Products -->
      <div *ngIf="!loading && products.length === 0" class="no-products">
        <div class="no-products-icon">üîç</div>
        <h3>–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏</p>
        <button class="primary-btn" (click)="clearFilters()">
          –°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
        </button>
      </div>

      <!-- Pagination -->
      <div *ngIf="!loading && products.length > 0" class="pagination">
        <button class="pagination-btn"
                [disabled]="!pagination.hasPrev"
                (click)="onPageChange(pagination.currentPage - 1)">
          –ù–∞–∑–∞–¥
        </button>

        <span class="pagination-info">
          –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ pagination.currentPage }} –∏–∑ {{ pagination.totalPages }}
        </span>

        <button class="pagination-btn"
                [disabled]="!pagination.hasNext"
                (click)="onPageChange(pagination.currentPage + 1)">
          –í–ø–µ—Ä–µ–¥
        </button>
      </div>
    </main>
  </div>
</div>
